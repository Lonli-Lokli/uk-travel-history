# Codecov configuration
# See: https://docs.codecov.com/docs/codecov-yaml

coverage:
  status:
    project:
      default:
        target: 70% # Target coverage percentage
        threshold: 2% # Allow 2% drop before failing
        if_ci_failed: error
    patch:
      default:
        target: auto
        threshold: 0

comment:
  layout: 'header, diff, flags, components'
  behavior: default
  require_changes: false # Always comment on PRs

flags:
  unittests:
    paths:
      - packages/
      - apps/

component_management:
  individual_components:
    - component_id: auth-cleint
      name: Auth Client
      paths:
        - packages/auth-client/**
    - component_id: auth-server
      name: Auth Server
      paths:
        - packages/auth-server/**
    - component_id: calculators
      name: Calculators
      paths:
        - packages/calculators/**
    - component_id: db
      name: Db
      paths:
        - packages/db/**
    - component_id: features
      name: Features
      paths:
        - packages/features/**
    - component_id: parser
      name: Parser
      paths:
        - packages/parser/**
    - component_id: payments-client
      name: Payments (Client)
      paths:
        - packages/payments-client/**
    - component_id: payments-server
      name: Payments (Server)
      paths:
        - packages/payments-server/**
    - component_id: Stores
      name: UI Stores
      paths:
        - packages/stores/**
    - component_id: ui
      name: UI Primitives
      paths:
        - packages/ui/**
    - component_id: utils
      name: Utils
      paths:
        - packages/utils/**
    - component_id: widgets
      name: UI Widgets
      paths:
        - packages/widgets/**

ignore:
  - '**/*.spec.ts'
  - '**/*.test.ts'
  - '**/__tests__/**'
  - '**/node_modules/**'
  - '**/test-output/**'
  - '**/*.config.ts'
  - '**/dist/**'
